---
title: Formidable
description: Astro-Utils formidable port
---
import { Tabs, TabItem } from '@astrojs/starlight/components';

Allow you to use formidable to parse request body.

With formidable you can parse multipart forms (file upload).

## Installation
Install the package by running

<Tabs>
<TabItem label="npm">

```sh
npm install @astro-utils/formidable
```

</TabItem>
<TabItem label="pnpm">

```sh
pnpm add @astro-utils/formidable
```

</TabItem>
<TabItem label="Yarn">

```sh
yarn add @astro-utils/formidable
```

</TabItem>
</Tabs>

## Using formidable
### Endpoint

`pages/upload.json.ts`
```ts
import {parseAstroForm, isFormidableFile} from '@astro-utils/formidable';

export const post: APIRoute = async ({ request }) => {
    const formData: FormData = await parseAstroForm(Astro.request);
    let name = 'Not-File'

    const file = formData.get('file');
    if(isFormidableFile(file)){
        name = file.name;
    }

    return {
        body: name
    }
}
```

### Astro Page
`pages/index.page`
```astro
---
import {parseAstroForm, isFormidableFile} from '@astro-utils/formidable';

if(Astro.request.method === "POST"){
    const formData: FormData = await parseAstroForm(Astro.request);

    const file = formData.get('my-file');
    if(isFormidableFile(file)){
        console.log('The user upload a file');
    }
}
---
```

## Note
This package is used in `@astro-utils/forms`. You don't need to do anything to enable file upload if you're already using `@astro-utils/forms`.
